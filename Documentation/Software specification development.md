# 6. Разработка спецификации ПО

**TourBooking** — Android-приложение для бронирования туристических туров. Использует облачную БД **Firebase Firestore** и архитектуру **MVVM**.

## а) Модуль аутентификации

**Компоненты:** AuthActivity, FirebaseAuth  
**Функции:** Регистрация и авторизация по email/пароль. Разделение ролей: пользователь (user) и администратор (admin).  
**Данные:** Коллекция users хранит email, имя, роль и дату создания. Вложенная коллекция favorites для избранного.  
**Ограничения:** Все функции требуют авторизации. Роль определяется при первом входе.

## б) Модуль управления турами

**Компоненты:** Tour, HomeFragment, TourDetailActivity, AdminToursFragment  
**Функции:** Просмотр каталога, детальная информация, добавление в избранное. Админ: создание, редактирование, удаление туров.  
**Сущность Tour:** id, title, description, country, price, imageUrl, active.  
**Ограничения:** Обычные пользователи видят только активные туры (active=true). Изображения загружаются через **Glide**.

## в) Модуль бронирования

**Компоненты:** Booking, BookingsFragment, AdminBookingsFragment  
**Функции:** Оформление брони с указанием участников, просмотр истории, админ-подтверждение/отмена.  
**Сущность Booking:** id, userId, tourId, participants, status, totalPrice, createdAt.  
**Статусы:** pending (ожидание), confirmed (подтверждено), cancelled (отменено).  
**Ограничения:** Пользователи видят только свои брони. Отмена — только через администратора.

## г) Модуль базы данных (Firebase)

**Компоненты:** FirebaseFirestore, FirebaseAuth, облачные правила безопасности  
**Структура БД:**
- Коллекция tours – все туристические предложения
- Коллекция bookings – все бронирования пользователей  
- Коллекция users – профили пользователей
- Вложенные коллекции users/{id}/favorites – избранные туры

**Функции:** Синхронизация в реальном времени, офлайн-поддержка, автоматическое масштабирование.  
**Ограничения:** Правила безопасности Firestore контролируют доступ к данным. Требуется интернет-соединение для полной функциональности.

## д) Модуль навигации и UI

**Компоненты:** MainActivity, BottomNavigationView, адаптеры (TourAdapter, BookingAdapter)  
**Функции:** Навигация через нижнее меню (6 пунктов). Динамическое меню: админские пункты скрыты для user. Списки через RecyclerView.  
**Экраны:** Туры, Брони, Избранное, Профиль, Управление (admin), Подтверждение (admin).  
**Ограничения:** Все экраны требуют авторизации. Данные обновляются в реальном времени из Firebase.
